<!-- Navigation Fragment Module for HubSpot -->
<!-- This module loads the navigation fragment from CDN and injects HubSpot content -->

{% set fragment_base_url = module.fragment_url or 'http://localhost:8080' %}
{% set theme = module.theme or 'cellcolabs' %}

<!-- Load Fragment CSS -->
<link rel="stylesheet" href="{{ fragment_base_url }}/navigation/v1/styles.css">

<!-- Fragment Container -->
<div class="cellcolabs-navigation-fragment" data-theme="{{ theme }}">
  <!-- Navigation HTML Structure -->
  <nav class="navigation__navigation" data-component="navigation" data-theme="{{ theme }}">
    <div class="navigation__container">
      <div class="navigation__content">
        <div class="navigation__brand">
          <span class="navigation__brandBold">{{ module.brand_text_bold }}</span>
          <span class="navigation__brandRegular">{{ module.brand_text_regular }}</span>
        </div>

        <button class="navigation__mobileToggle" aria-label="Toggle menu" aria-expanded="false">
          <div class="navigation__dotsGrid">
            {% for i in range(15) %}
            <span class="navigation__dot"></span>
            {% endfor %}
          </div>
        </button>

        <ul class="navigation__menu">
          {% for item in module.menu_items %}
          <li class="navigation__menuItem">
            <a href="{{ item.href }}" class="navigation__menuLink">{{ item.label }}</a>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </nav>
</div>

<script>
// Mobile menu toggle
(function() {
  document.querySelectorAll('.navigation__mobileToggle').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var menu = btn.parentElement.querySelector('.navigation__menu');
      var isOpen = menu.classList.contains('navigation__menuOpen');
      menu.classList.toggle('navigation__menuOpen');
      btn.setAttribute('aria-expanded', !isOpen);
    });
  });
})();
</script>