<!--
  templateType: none
-->
<!doctype html>

{# Retrieve translations for the template #}
{% set template_translations = load_translations('../_locales', html_lang, 'en') %}

<html lang="{{ html_lang }}" {{ html_lang_dir }}>
  <head>
    <meta charset="utf-8">
    {% if page_meta.html_title %}
      {% set page_title = page_meta.html_title %}
    {% endif %}
    {% if page_title %}
      <title>{{ page_title|sanitize_html('STRIP') }}</title>
    {% endif %}
    {% if branding_favicon %}
      <link rel="shortcut icon" href="{{ branding_favicon }}" />
    {% endif %}
    <meta name="description" content="{{ page_meta.meta_description }}">

    {# Preconnect to Google Fonts for LCP optimization - establishes early connection before CSS loads #}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    {{ require_css(get_asset_url("../../css/main.css")) }}
    {# This is intended to be used if a template requires template specific style sheets #}
    {% if template_css %}
      {{ require_css(get_asset_url(template_css)) }}
    {% endif %}
    {{ require_css(get_asset_url("../../css/theme-overrides.css")) }}
    {# To see a full list of what is included via standard_header_includes please reference this article: https://developers.hubspot.com/docs/cms/hubl/variables#required-page-template-variables #}
    {{ require_js(get_asset_url("../../child.js")) }}
{{ standard_header_includes }}
{{ require_css(get_public_template_url("../../child.css")) }}
{{ require_css(get_public_template_url("../../css/standard-modules.css")) }}
{{ require_css(get_public_template_url("../../css/marketplace-modules.css")) }}
  </head>
  {# Set global brand based on domain and query parameter #}
  {% set global_brand = "cellcolabsclinical" %}

  {# Check domain (production and staging) #}
  {% if request.domain == "cellcolabs.com" or "cellcolabs-ab" in request.domain %}
    {% set global_brand = "cellcolabs" %}
  {% endif %}

  {# Allow brand override via query parameter for preview (e.g., ?brand=cellcolabs) #}
  {% if request.query_dict.brand %}
    {% set global_brand = request.query_dict.brand %}
  {% endif %}

  <body data-brand="{{ global_brand }}">
    {# Brand Preview Selector - Only visible in preview/staging environments #}
    <div id="brand-switcher" style="position: fixed; top: 90px; right: 10px; z-index: 10000; background: rgba(22, 22, 22, 0.9); padding: 12px 16px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); font-family: var(--font-body, 'Inter', sans-serif);">
      <label for="brand-selector" style="color: #ffffff; font-size: 14px; font-weight: 500; margin-right: 8px;">Preview Brand:</label>
      <select id="brand-selector" style="padding: 6px 12px; border-radius: 4px; border: 1px solid #525252; background: #ffffff; font-size: 14px; cursor: pointer;">
        <option value="cellcolabsclinical">Cellcolabs Clinical (Blue)</option>
        <option value="cellcolabs">Cellcolabs AB (Green)</option>
      </select>
    </div>

    <div class="body-wrapper {{ builtin_body_classes }}">
      {% block header %}
        {% if global_brand == "cellcolabs" %}
          {% module "header_cellcolabs" path="../../modules/header-cellcolabs.module" %}
        {% else %}
          {% module "header_clinical" path="../../modules/header-clinical.module" %}
        {% endif %}
      {% endblock header %}

      {# Breadcrumb Navigation #}
      {% block breadcrumb %}
        {% module "breadcrumb" path="../../modules/breadcrumb.module"
          hide_on_homepage=True
          show_home_link=True
          separator="chevron"
        %}
      {% endblock breadcrumb %}

      {# The main-content ID is used for the navigation skipper in the header.html file #}
      <main id="main-content">
        {% block body %}
        {% endblock body %}
      </main>

      {% block footer %}
        {% if global_brand == "cellcolabs" %}
          {% module "footer_cellcolabs" path="../../modules/footer-cellcolabs.module" %}
        {% else %}
          {% module "footer_clinical" path="../../modules/footer-clinical.module" %}
        {% endif %}
      {% endblock footer %}
    </div>
    {# This is intended to be used if a template requires template specific JavaScript files #}
    {% if template_js %}
      {{ require_js(get_asset_url(template_js)) }}
    {% endif %}
    {# To see a full list of what is included via standard_footer_includes please reference this article: https://developers.hubspot.com/docs/cms/hubl/variables#required-page-template-variables #}
    {{ standard_footer_includes }}
  </body>
</html>
