<!-- Locations Carousel Block Module -->
<section class="locations-carousel-block">
  <div class="container">
    <!-- Content Header Section -->
    <div class="content-header">
      <div class="content-header-left">
        <div class="eyebrow">{{ module.eyebrow_text }}</div>
        <h2 class="main-title">{{ module.main_title }}</h2>
      </div>
      <div class="content-header-right">
        <div class="main-description">{{ module.main_description }}</div>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
          <button
            class="tab tab-active"
            data-slide="0"
            aria-selected="true"
          >
            {{ module.location1_name }}
          </button>
          <button
            class="tab"
            data-slide="1"
            aria-selected="false"
          >
            {{ module.location2_name }}
          </button>
        </div>
      </div>
    </div>

    <!-- Image Carousel -->
    <div class="carousel-container">
      <div class="carousel-track" data-slide-index="0">
        <div class="carousel-slide">
          <img
            src="{{ module.location1_image.src }}"
            alt="{{ module.location1_image.alt }}"
            class="carousel-image"
          />
        </div>
        <div class="carousel-slide">
          <img
            src="{{ module.location2_image.src }}"
            alt="{{ module.location2_image.alt }}"
            class="carousel-image"
          />
        </div>
      </div>
    </div>

    <!-- Progress Indicators -->
    <div class="progress-indicators">
      <div class="progress-dot progress-dot-active"></div>
      <div class="progress-dot"></div>
    </div>

    <!-- Bottom Content -->
    <div class="bottom-content">
      <div class="bottom-content-inner">
        <div class="location-content location-content-active">
          <h3 class="location-title">{{ module.location1_title }}</h3>
          <div class="location-description">{{ module.location1_description }}</div>
          <a href="{{ module.location1_link_url }}" class="location-link">{{ module.location1_link_text }}</a>
        </div>
        <div class="location-content">
          <h3 class="location-title">{{ module.location2_title }}</h3>
          <div class="location-description">{{ module.location2_description }}</div>
          <a href="{{ module.location2_link_url }}" class="location-link">{{ module.location2_link_text }}</a>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
/* Locations Carousel Block Module Styles */

.locations-carousel-block {
  padding: var(--space-128) 0;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
}

.locations-carousel-block .container {
  max-width: 1460px;
  margin: 0 auto;
  padding: 0 var(--space-24);
  width: 100%;
  box-sizing: border-box;
}

/* Content Header Section */
.locations-carousel-block .content-header {
  display: flex;
  align-items: flex-start;
  gap: var(--space-16);
  margin-bottom: var(--space-64);
  width: 100%;
}

.locations-carousel-block .content-header-left {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-32);
  align-items: flex-start;
}

.locations-carousel-block .content-header-right {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-32);
  align-items: flex-start;
}

.locations-carousel-block .eyebrow {
  background-color: var(--color-neutral-100);
  padding: var(--space-8) var(--space-12);
  border-radius: var(--border-radius-8);
  font-family: var(--font-body);
  font-size: var(--font-size-body-small);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  color: var(--color-text-secondary);
  text-align: center;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: fit-content;
}

.locations-carousel-block .main-title {
  font-family: var(--font-heading);
  font-size: var(--font-size-h2);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text-primary);
  margin: 0;
  white-space: pre-line;
  max-width: 350px;
}

.locations-carousel-block .main-description {
  font-family: var(--font-body);
  font-size: var(--font-size-body-large);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  color: var(--color-text-secondary);
  margin: 0;
  max-width: 560px;
}

/* Tab Navigation */
.locations-carousel-block .tab-navigation {
  display: flex;
  gap: var(--space-32);
  align-items: center;
  border-bottom: 1px solid var(--color-border);
  position: relative;
}

.locations-carousel-block .tab {
  background: none;
  border: none;
  padding: var(--space-16) 0;
  font-family: var(--font-body);
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  color: var(--color-border);
  cursor: pointer;
  position: relative;
  transition: color 0.3s ease;
}

.locations-carousel-block .tab:hover {
  color: var(--color-text-primary);
}

.locations-carousel-block .tab-active {
  color: var(--color-text-primary) !important;
}

.locations-carousel-block .tab-active::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 1px;
  background-color: var(--color-text-primary);
}

/* Carousel Container */
.locations-carousel-block .carousel-container {
  position: relative;
  width: 100vw;
  margin-left: calc(-50vw + 50%);
  margin-bottom: var(--space-32);
  overflow: visible;
}

/* Override the nuclear width system for this full-bleed section */
.locations-carousel-block .carousel-container .row-fluid {
  max-width: 100vw !important;
  margin: 0 !important;
}

.locations-carousel-block .carousel-track {
  display: flex;
  transition: transform 0.5s ease-in-out;
  width: calc(2 * (1260px + 16px));
  gap: var(--space-16);
  margin-left: calc((100vw - 1460px) / 2 + var(--space-24));
  transform: translateX(calc(var(--slide-index, 0) * -1276px));
}

.locations-carousel-block .carousel-slide {
  width: 1260px;
  flex-shrink: 0;
  position: relative;
}

.locations-carousel-block .carousel-image {
  width: 1260px;
  height: 638px;
  object-fit: cover;
  border-radius: var(--border-radius-8);
}

/* Progress Indicators */
.locations-carousel-block .progress-indicators {
  display: flex;
  gap: var(--space-8);
  align-items: center;
  justify-content: flex-start;
  margin-bottom: var(--space-32);
}

.locations-carousel-block .progress-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background-color: var(--color-neutral-200);
  transition: all 0.3s ease;
}

.locations-carousel-block .progress-dot-active {
  width: var(--space-24);
  height: 4px;
  border-radius: 64px;
  background-color: var(--color-text-primary);
}

/* Bottom Content */
.locations-carousel-block .bottom-content {
  width: 100%;
  display: flex;
  justify-content: flex-start;
}

.locations-carousel-block .bottom-content-inner {
  width: 560px;
  max-width: 560px;
  display: flex;
  flex-direction: column;
  gap: var(--space-32);
  margin-left: calc(50% + var(--space-8));
  position: relative;
}

.locations-carousel-block .location-content {
  display: none;
}

.locations-carousel-block .location-content-active {
  display: flex;
  flex-direction: column;
  gap: var(--space-32);
}

.locations-carousel-block .location-title {
  font-family: var(--font-heading);
  font-size: var(--font-size-h3);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text-primary);
  margin: 0;
}

.locations-carousel-block .location-description {
  font-family: var(--font-body);
  font-size: var(--font-size-body-large);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  color: var(--color-text-secondary);
  margin: 0;
}

.locations-carousel-block .location-link {
  font-family: var(--font-body);
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  text-decoration: underline;
  text-decoration-skip-ink: none;
  width: fit-content;
}

.locations-carousel-block .location-link:hover {
  opacity: 0.8;
}

/* Tablet responsive adjustments */
@media (max-width: 1023px) {
  .locations-carousel-block {
    padding: var(--space-96) 0;
  }

  .locations-carousel-block .content-header {
    margin-bottom: var(--space-48);
  }

  .locations-carousel-block .main-title {
    font-size: var(--font-size-h2-mobile);
  }

  .locations-carousel-block .location-title {
    font-size: var(--font-size-h3-mobile);
  }

  .locations-carousel-block .carousel-track {
    width: calc(2 * (650px + 16px));
    margin-left: calc((100vw - 750px) / 2 + var(--space-24));
    transform: translateX(calc(var(--slide-index, 0) * -666px));
  }

  .locations-carousel-block .carousel-slide {
    width: 650px;
  }

  .locations-carousel-block .carousel-image {
    width: 650px;
    height: 347px;
  }

  .locations-carousel-block .bottom-content-inner {
    width: 100%;
    max-width: 560px;
  }
}

/* Mobile breakpoint */
@media (max-width: 767px) {
  .locations-carousel-block {
    padding: var(--space-64) 0;
  }

  .locations-carousel-block .container {
    padding: 0 var(--space-16);
  }

  .locations-carousel-block .content-header {
    flex-direction: column;
    gap: var(--space-32);
    margin-bottom: var(--space-32);
  }

  .locations-carousel-block .content-header-left,
  .locations-carousel-block .content-header-right {
    flex: none;
    width: 100%;
  }

  .locations-carousel-block .main-title {
    font-size: var(--font-size-h2-mobile);
    text-align: left;
  }

  .locations-carousel-block .main-description {
    font-size: var(--font-size-body);
  }

  .locations-carousel-block .tab-navigation {
    gap: var(--space-24);
    justify-content: center;
  }

  .locations-carousel-block .carousel-track {
    width: calc(2 * (calc(100vw - 64px) + 16px));
    margin-left: var(--space-16);
    transform: translateX(calc(var(--slide-index, 0) * calc(-100vw + 48px)));
  }

  .locations-carousel-block .carousel-slide {
    width: calc(100vw - 64px);
    flex-shrink: 0;
  }

  .locations-carousel-block .carousel-image {
    width: 100% !important;
    height: auto !important;
    aspect-ratio: 0.8 !important;
    object-fit: cover;
  }

  .locations-carousel-block .progress-indicators {
    justify-content: center;
  }

  .locations-carousel-block .bottom-content {
    justify-content: flex-start;
  }

  .locations-carousel-block .bottom-content-inner {
    text-align: left;
    margin-left: 0;
    width: 100%;
    max-width: 100%;
  }

  .locations-carousel-block .location-title {
    font-size: var(--font-size-h3-mobile);
  }

  .locations-carousel-block .location-link {
    align-self: flex-start;
  }
}

/* Small mobile adjustments */
@media (max-width: 480px) {
  .locations-carousel-block {
    padding: var(--space-48) 0;
  }

  .locations-carousel-block .main-title {
    font-size: var(--font-size-h3-mobile);
  }

  .locations-carousel-block .location-title {
    font-size: var(--font-size-h4);
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const carouselBlocks = document.querySelectorAll('.locations-carousel-block');

  carouselBlocks.forEach(function(block) {
    const tabs = block.querySelectorAll('.tab');
    const track = block.querySelector('.carousel-track');
    const progressDots = block.querySelectorAll('.progress-dot');
    const locationContents = block.querySelectorAll('.location-content');
    let activeIndex = 0;

    tabs.forEach(function(tab, index) {
      tab.addEventListener('click', function() {
        // Update active tab
        tabs.forEach(t => {
          t.classList.remove('tab-active');
          t.setAttribute('aria-selected', 'false');
        });
        tab.classList.add('tab-active');
        tab.setAttribute('aria-selected', 'true');

        // Update progress dots
        progressDots.forEach(dot => dot.classList.remove('progress-dot-active'));
        if (progressDots[index]) {
          progressDots[index].classList.add('progress-dot-active');
        }

        // Update location content
        locationContents.forEach(content => content.classList.remove('location-content-active'));
        if (locationContents[index]) {
          locationContents[index].classList.add('location-content-active');
        }

        // Update carousel transform
        track.style.setProperty('--slide-index', index);
        track.setAttribute('data-slide-index', index);

        activeIndex = index;
      });
    });
  });
});
</script>